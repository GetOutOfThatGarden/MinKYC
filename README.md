# MinKYC â€” Privacy-Preserving KYC on Solana

MinKYC is a CLI-first MVP demonstrating privacy-preserving identity verification on Solana. It uses mocked Zero-Knowledge (ZK) proofs to allow users to prove they meet specific requirements (e.g., "Over 18") without revealing their underlying personal data (e.g., birthdate).

## Prerequisites

- **Node.js** v18+
- **Rust** & **Cargo**
- **Solana CLI**
- **Anchor CLI**

## Installation

1. Clone the repository
2. Install dependencies:
   ```bash
   npm install
   ```
3. Build the Anchor program:
   ```bash
   anchor build
   ```

## Setup & Deployment (Devnet)

1. **Configure Solana CLI:**
   ```bash
   solana config set --url devnet
   ```
2. **Fund your wallet:**
   ```bash
   solana airdrop 2
   ```
3. **Deploy the program:**
   ```bash
   solana program deploy target/deploy/minkyc.so --url devnet
   ```
   *Note: Ensure you have sufficient funds (approx 1.6 SOL) for deployment.*

## CLI Demo Flow

The CLI (`minkyc`) guides you through the entire identity lifecycle.

### 1. Initialize Identity
Create your on-chain identity PDA. This derives a commitment from your local passport data (mocked) and registers it on-chain.

```bash
npx tsx cli/src/index.ts identity init
```

### 2. Check Status
Verify your identity status on-chain.

```bash
npx tsx cli/src/index.ts identity status
```

### 3. Generate Platform Request
Simulate a 3rd-party platform requesting KYC (e.g., "Must be over 18").

```bash
npx tsx cli/src/index.ts platform request --over-18
```

### 4. Prove & Verify
Generate a local ZK proof (mocked) satisfying the request and submit it to the smart contract for verification.

```bash
npx tsx cli/src/index.ts prove
```
*Or use the alias:*
```bash
npx tsx cli/src/index.ts verify
```

## Project Structure

- **programs/minkyc**: Anchor smart contract (Rust).
  - `lib.rs`: Contains instructions for `initialize` and `verify_proof`.
- **cli**: TypeScript CLI tool.
  - `commands/`: Command implementations (`init`, `status`, `request`, `prove`).
  - `utils/`: Crypto helpers and connection logic.
  - `fixtures/`: Mocked passport data.

## Technical Details

- **PDA**: Identity state is stored in a Program Derived Address seeded by `["identity", owner_pubkey]`.
- **Commitment**: SHA256 hash of `passport_data + secret`.
- **Proof**: Mocked implementation where the client checks requirements locally and the contract verifies the commitment match (MVP shortcut). Real ZK proofs would be generated by Circom/Groth16.
